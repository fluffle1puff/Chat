<div *ngIf="!!messages" class="history">
  <div
    class="message-wrapper"
    *ngFor="let message of messages; let i = index; trackBy: messagesTrackByFn"
    [class.current-user]="currentUser?.id === message.user.id"
  >
    <span
      class="mesages-date"
      *ngIf="showDateIfNotSameDay(message, messages[i - 1])"
    >
      {{ message?.created_at | date : 'd MMMM' }}
    </span>
    <div class="message">
      <div
        class="user-name"
        *ngIf="i === 0 || (i > 0 && (message.user.id !== messages[i - 1].user.id))"
      >
        {{ message.user.username }}
      </div>
      <div class="text">
        <span>{{ message.text }}</span>
        <span class="time">{{ message.created_at | date : 'HH:mm' }}</span>
      </div>
    </div>
  </div>
</div>
